# Sample Exploit Loader

This is an example of how to implement a dynamic python script loader.

# Usage

Exploits are implemented as Python modules, either single .py files, or as folders with several .py files and an `__init__.py`.  Each module is loaded from the `./exploits/` folder.  The module that is loaded is selected in two ways:

By passing the name of the module as a parameter to the loader.  If you're using a single .py file, pass the filename without the `.py`.  If the exploit module is a folder, just pass it's name.
For example: `python . test_exploit`

If you run the script with no module parameter, you will be able to select which exploit to run.  Exploits are listed based on the contents of `exploits.json` (or whatever the exploits file is set to).
For example: `python .` will print

```
Exploit Loader

 1 - Test Exploit 1
 2 - Test Exploit 2
 3 - Test Exploit 3

Select an exploit (0 - 3): 
```

Currently, two other command line parameters are supported.  Parameters that control exploit execution are passed to the exploits.

- `--persistence` whether or not to perform the persistence stage.  this doesn't actually do anything, it's just an example of an exploit specific parameter you could add.  it's easy to add more commandline parameters to control exploit execution.  you need to add the parameter to the argument list at the top of the file, and add it to the bit that passes it to the exploit:
```
# set up arguments to be passed to exploit
    args = {
        "persistence": args.persistence,
        # new argument goes here
    }
```
- `--exploits_file` what file to read exploit metadata from.  deafult is `exploits.json`

# Adding new exploits

- Create a new file or folder in the `exploits` directory
- Add a new function with this signature: `def runExploit(args)`.  This is the entrypoint function that is called by the loader
- Add the function metadata to the exploits file, using this format:
```json
{
    "name": "Name of the Exploit",
    "description": "A short description of the exploit",
    "filename": "filename of the exploit (without the .py) or name of folder"
}
```